<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GamersEdge - Dominate the Digital Realm</title>
    <link rel="icon" href="assets/images/favicon.jpg">

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">

    <!-- GSAP Animation Library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>

    <!-- Fuse.js for Fuzzy Search -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/7.0.0/fuse.min.js"></script>

    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    
    <!-- Custom CSS -->
    <link rel="stylesheet" href="assets/css/style.css">

    <!-- Tailwind Config -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'void': '#050505',
                        'surface': '#0a0a0f',
                        'surface-light': '#12121a',
                        'neon-cyan': '#00AEEF',
                        'hyper-violet': '#7c3aed',
                        'electric-pink': '#ec4899',
                        'success-green': '#10b981',
                        'warning-amber': '#f59e0b',
                        'error-red': '#ef4444',
                        'text-primary': '#ffffff',
                        'text-secondary': 'rgba(255, 255, 255, 0.7)',
                        'text-muted': 'rgba(255, 255, 255, 0.4)',
                    },
                    fontFamily: {
                        'sans': ['Inter', 'sans-serif'],
                        'mono': ['JetBrains Mono', 'monospace'],
                    },
                    animation: {
                        'glow': 'glow 2s ease-in-out infinite alternate',
                        'float': 'float 6s ease-in-out infinite',
                        'pulse-slow': 'pulse 4s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                    },
                    keyframes: {
                        glow: {
                            '0%': { boxShadow: '0 0 20px rgba(0, 174, 239, 0.3)' },
                            '100%': { boxShadow: '0 0 40px rgba(0, 174, 239, 0.6)' },
                        },
                        float: {
                            '0%, 100%': { transform: 'translateY(0px)' },
                            '50%': { transform: 'translateY(-20px)' },
                        },
                    },
                },
            },
        }
    </script>
</head>
<body class="bg-void text-text-primary font-sans">

    <!-- Loading Screen -->
    <div id="loading-screen" class="fixed inset-0 bg-void z-[100] flex flex-col items-center justify-center font-mono">
        <img src="assets/images/logo.webp" alt="GamersEdge Logo" class="w-32 h-32 loader-logo mb-8">
        
        <div class="w-72 relative mb-4">
            <div class="w-full bg-surface h-2 rounded-full overflow-hidden">
                <div class="bg-neon-cyan h-full rounded-full loader-progress" style="width: 0%;"></div>
            </div>
            <span id="loader-percentage" class="absolute -right-12 top-1/2 -translate-y-1/2 text-neon-cyan">0%</span>
        </div>
        
        <p id="loader-status-text" class="mt-4 text-text-secondary h-6">Initializing Systems...</p>

        <div id="loader-tasks" class="text-left text-text-muted mt-4 w-72 h-24 overflow-hidden relative">
            <div class="absolute top-0 left-0">
                <p class="loader-task opacity-0 transform translate-y-4">&gt; Loading Assets</p>
                <p class="loader-task opacity-0 transform translate-y-4">&gt; Configuring Store</p>
                <p class="loader-task opacity-0 transform translate-y-4">&gt; Ready to Dominate</p>
            </div>
        </div>

        <button id="skip-loader" class="absolute bottom-10 text-text-muted hover:text-white opacity-0 transition-opacity duration-300">Skip</button>
    </div>

    <!-- Header -->
    <header class="fixed top-0 left-0 right-0 z-50 transition-all duration-300">
        <nav class="container mx-auto px-4 py-4 flex justify-between items-center">
            <a href="index.html" class="flex items-center gap-2">
                <img src="assets/images/logo.webp" alt="GamersEdge Logo" class="w-10 h-10">
                <span class="text-xl font-bold">GamersEdge</span>
            </a>
            <div class="hidden md:flex items-center gap-8">
                <a href="index.html" class="text-white hover:text-neon-cyan transition-colors">Home</a>
                <a href="shop.html" class="text-white hover:text-neon-cyan transition-colors">Shop</a>
                <a href="about.html" class="text-white hover:text-neon-cyan transition-colors">About</a>
                <a href="contact.html" class="text-white hover:text-neon-cyan transition-colors">Contact</a>
            </div>
            <div class="flex items-center gap-4">
                <button id="search-btn" class="hover:text-neon-cyan transition-colors"><i data-lucide="search"></i></button>
                <a href="wishlist.html" class="hover:text-neon-cyan transition-colors relative">
                    <i data-lucide="heart"></i>
                    <span id="wishlist-count" class="absolute -top-2 -right-2 bg-electric-pink text-white text-xs rounded-full h-5 w-5 flex items-center justify-center font-bold" style="display: none;">0</span>
                </a>
                <button data-open-cart class="relative hover:text-neon-cyan transition-colors">
                    <i data-lucide="shopping-cart" id="cart-icon"></i>
                    <span class="cart-count absolute -top-2 -right-2 bg-neon-cyan text-void text-xs rounded-full h-5 w-5 flex items-center justify-center font-bold">0</span>
                </button>
            </div>
        </nav>
    </header>

    <!-- Cart Drawer -->
    <div id="cart-overlay" class="fixed inset-0 bg-black/50 z-50 opacity-0 pointer-events-none transition-opacity duration-300"></div>
    <div id="cart-drawer" class="fixed top-0 right-0 h-full w-full max-w-md bg-surface-dark z-[60] transform translate-x-full transition-transform duration-300 flex flex-col">
        <div class="flex justify-between items-center p-6 border-b border-surface-light">
            <h3 class="text-xl font-bold">Your Rig ðŸ›’</h3>
            <button data-close-cart class="text-text-muted hover:text-white"><i data-lucide="x"></i></button>
        </div>
        <div id="cart-items" class="flex-1 p-6 overflow-y-auto">
            <!-- Cart items will be rendered here by JavaScript -->
        </div>
        <div class="p-6 border-t border-surface-light">
            <div class="flex justify-between text-lg">
                <span>Subtotal:</span>
                <span id="cart-total" class="font-mono">Rs. 0</span>
            </div>
            <a href="cart.html" class="block text-center w-full bg-neon-cyan text-void font-bold py-3 rounded-lg mt-4 hover:bg-opacity-80 transition-all">Checkout Now</a>
            <button data-close-cart class="block text-center w-full text-text-secondary mt-2">or Continue Shopping</button>
        </div>
    </div>
    
    <!-- Search Modal -->
    <div id="search-modal" class="fixed inset-0 bg-void/80 backdrop-blur-lg z-[70] hidden items-center justify-center p-4">
      <div class="w-full max-w-2xl bg-surface-dark rounded-xl border border-surface-light shadow-2xl shadow-neon-cyan/10">
        <div class="p-4">
          <div class="relative">
            <i data-lucide="search" class="absolute left-4 top-1/2 -translate-y-1/2 text-text-muted"></i>
            <input type="text" id="search-input" placeholder="Search products, categories, brands..." class="w-full bg-surface-light border-2 border-transparent focus:border-neon-cyan rounded-lg pl-12 pr-4 py-3 text-white outline-none transition-all">
          </div>
        </div>
        <div id="search-results" class="p-4 border-t border-surface-light max-h-[60vh] overflow-y-auto">
          <!-- Instant results will appear here -->
        </div>
        <div class="px-4 py-2 bg-surface-dark rounded-b-xl text-xs text-text-muted flex justify-between">
            <span>Press <kbd class="px-2 py-1 bg-surface-light rounded">ESC</kbd> to close</span>
            <span><kbd class="px-2 py-1 bg-surface-light rounded">â†µ</kbd> View All</span>
        </div>
      </div>
    </div>

    <main>
        <!-- Hero Section -->
        <section class="relative h-screen bg-cover bg-center flex items-center justify-center text-center" style="background-image: url('assets/images/banner-main.jpg');">
            <div class="absolute inset-0 bg-black/60"></div>
            <div class="relative z-10 px-4">
                <h1 id="hero-title" class="text-4xl md:text-6xl font-extrabold text-white leading-tight mb-4 animate-on-scroll">Build Your Dream Setup</h1>
                <p id="hero-subtitle" class="text-lg md:text-xl text-text-secondary max-w-2xl mx-auto mb-8 animate-on-scroll" style="animation-delay: 0.2s;">Premium gaming hardware at unbeatable prices, delivered to your doorstep in Sri Lanka.</p>
                <a href="shop.html" id="hero-cta" class="bg-neon-cyan text-void font-bold py-3 px-8 rounded-lg text-lg hover:bg-opacity-80 transition-all magnetic-btn animate-on-scroll" style="animation-delay: 0.4s;">Shop Now</a>
            </div>
        </section>

        <!-- Featured Categories -->
        <section class="py-20 bg-surface">
            <div class="container mx-auto px-4 text-center">
                <h2 class="text-3xl font-bold mb-12 animate-on-scroll">Browse by Category</h2>
                <div id="category-grid" class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-7 gap-4 stagger-children">
                    <!-- Categories will be rendered by JS -->
                </div>
            </div>
        </section>
        
        <!-- Featured Products -->
        <section class="py-20 bg-void">
            <div class="container mx-auto px-4">
                <h2 class="text-3xl font-bold text-center mb-12 animate-on-scroll">Featured Products</h2>
                <div id="featured-products" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 stagger-children">
                    <!-- Product cards will be rendered by JS -->
                </div>
                <div class="text-center mt-12">
                    <a href="shop.html" class="border border-neon-cyan text-neon-cyan font-bold py-3 px-8 rounded-lg hover:bg-neon-cyan hover:text-void transition-all magnetic-btn">View All Products</a>
                </div>
            </div>
        </section>
        
        <!-- Why Choose Us -->
        <section class="py-20 bg-surface">
            <div class="container mx-auto px-4">
                <h2 class="text-3xl font-bold text-center mb-12 animate-on-scroll">Why GamersEdge?</h2>
                <div class="grid md:grid-cols-3 gap-12 text-center stagger-children">
                    <div class="animate-on-scroll">
                        <div class="flex justify-center mb-4"><i data-lucide="truck" class="text-neon-cyan" size="48"></i></div>
                        <h3 class="text-xl font-bold mb-2">Island-Wide Delivery</h3>
                        <p class="text-text-secondary">Get your gear delivered fast, anywhere in Sri Lanka. Track your order every step of the way.</p>
                    </div>
                    <div class="animate-on-scroll" style="animation-delay: 0.2s;">
                        <div class="flex justify-center mb-4"><i data-lucide="shield-check" class="text-neon-cyan" size="48"></i></div>
                        <h3 class="text-xl font-bold mb-2">Genuine Warranty</h3>
                        <p class="text-text-secondary">We only sell 100% genuine products with official manufacturer warranties. Your investment is safe.</p>
                    </div>
                    <div class="animate-on-scroll" style="animation-delay: 0.4s;">
                        <div class="flex justify-center mb-4"><i data-lucide="wrench" class="text-neon-cyan" size="48"></i></div>
                        <h3 class="text-xl font-bold mb-2">Expert Support</h3>
                        <p class="text-text-secondary">Our team of passionate gamers is here to help you build your perfect rig and troubleshoot any issues.</p>
                    </div>
                </div>
            </div>
        </section>

    </main>

    <!-- Footer -->
    <footer class="bg-surface-dark py-12">
        <div class="container mx-auto px-4">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-8 mb-8">
                <div>
                    <h4 class="font-bold text-lg mb-4">GamersEdge</h4>
                    <p class="text-text-secondary">Dominate the Digital Realm. The #1 source for premium PC hardware in Sri Lanka.</p>
                </div>
                <div>
                    <h4 class="font-bold text-lg mb-4">Quick Links</h4>
                    <ul class="space-y-2">
                        <li><a href="shop.html" class="text-text-secondary hover:text-white">Shop</a></li>
                        <a href="about.html" class="text-text-secondary hover:text-white">About Us</a>
                        <li><a href="admin/index.html" class="text-text-secondary hover:text-white">Admin Login</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="font-bold text-lg mb-4">Contact Us</h4>
                    <ul class="space-y-2 text-text-secondary">
                        <li id="footer-email">sl.gamersedge@gmail.com</li>
                        <li id="footer-phone">074 070 5733</li>
                        <li id="footer-address">Wilimbula, Henegama, Sri Lanka</li>
                    </ul>
                </div>
                <div>
                    <h4 class="font-bold text-lg mb-4">Follow Us</h4>
                    <div class="flex space-x-4">
                        <a href="#" class="text-text-secondary hover:text-white"><i data-lucide="facebook"></i></a>
                        <a href="#" class="text-text-secondary hover:text-white"><i data-lucide="instagram"></i></a>
                        <a href="#" class="text-text-secondary hover:text-white"><i data-lucide="youtube"></i></a>
                    </div>
                </div>
            </div>
            <div class="border-t border-surface-light pt-8 text-center text-text-muted">
                &copy; <span id="footer-year">2024</span> GamersEdge. All Rights Reserved.
            </div>
        </div>
    </footer>


    <!-- Core Scripts -->
    <script src="assets/js/core/store.js"></script>
    <script src="assets/js/core/ui.js"></script>
    
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const App = {
                init() {
                    if(window.Seeder) Seeder.run();
                    this.loadSettings();
                    this.renderFeaturedCategories();
                    this.renderFeaturedProducts();
                    if(window.Animations) Animations.init();
                    if(window.Cart) Cart.init();
                    this.initUI();
                },
                loadSettings() {
                    const settings = Store.getSettings();
                    if (settings.heroTitle) document.getElementById('hero-title').textContent = settings.heroTitle;
                    if (settings.heroSubtitle) document.getElementById('hero-subtitle').textContent = settings.heroSubtitle;
                    if (settings.heroCTA) document.getElementById('hero-cta').textContent = settings.heroCTA;
                    if (settings.heroBackground) {
                        const hero = document.querySelector('.h-screen.bg-cover');
                        if(hero) hero.style.backgroundImage = `url('${settings.heroBackground}')`;
                    }
                    if(settings.email) {
                        const emailEl = document.getElementById('footer-email');
                        if(emailEl) emailEl.textContent = settings.email;
                    }
                    if(settings.phone) {
                        const phoneEl = document.getElementById('footer-phone');
                        if(phoneEl) phoneEl.textContent = settings.phone;
                    }
                    if(settings.address) {
                        const addressEl = document.getElementById('footer-address');
                        if(addressEl) addressEl.textContent = settings.address;
                    }
                },
                renderFeaturedCategories() {
                    const categories = Store.getCategories();
                    const container = document.getElementById('category-grid');
                    if (container) {
                        container.innerHTML = categories.slice(0, 7).map(category => UI.createCategoryCard(category)).join('');
                    }
                },
                renderFeaturedProducts() {
                    const products = Store.getProducts();
                    const container = document.getElementById('featured-products');
                    if (container) {
                        const featuredCount = Store.getSettings().featuredCount || 8;
                        container.innerHTML = products.filter(p => p.featured).slice(0, featuredCount).map(product => UI.createProductCard(product)).join('');
                        if(window.Animations) Animations.init3DCards();
                    }
                },
                initUI() {
                    lucide.createIcons();
                    document.getElementById('footer-year').textContent = new Date().getFullYear();
                    // Search Modal Logic
                    const searchBtn = document.getElementById('search-btn');
                    const searchModal = document.getElementById('search-modal');
                    const searchInput = document.getElementById('search-input');
                    if(searchBtn && searchModal && searchInput) {
                        const openSearch = () => searchModal.classList.add('flex');
                        const closeSearch = () => searchModal.classList.remove('flex');
                        searchBtn.addEventListener('click', openSearch);
                        searchModal.addEventListener('click', (e) => { if(e.target === searchModal) closeSearch(); });
                        document.addEventListener('keydown', (e) => {
                            if (e.key === 'Escape') closeSearch();
                            if (e.ctrlKey && e.key === 'k') { e.preventDefault(); openSearch(); }
                        });
                        if(window.Search) Search.init(searchInput, document.getElementById('search-results'));
                    }
                }
            };

            const Wishlist = {
                items: [],
                init() {
                    this.items = Store._get(STORAGE_KEYS.WISHLIST, []);
                    this.updateCount();
                },
                save() {
                    Store._set(STORAGE_KEYS.WISHLIST, this.items);
                    this.updateCount();
                },
                toggle(product) {
                    const inWishlist = this.items.some(p => p.id === product.id);
                    if (inWishlist) {
                        this.items = this.items.filter(p => p.id !== product.id);
                        Utils.showToast(`${product.name} removed from wishlist.`, 'info');
                    } else {
                        this.items.push(product);
                        Utils.showToast(`${product.name} added to wishlist!`, 'info');
                    }
                    this.save();
                },
                updateCount() {
                    const count = this.items.length;
                    document.querySelectorAll('.wishlist-count').forEach(el => {
                        el.textContent = count;
                        el.style.display = count > 0 ? 'flex' : 'none';
                    });
                }
            };
            
            App.init();
            Wishlist.init();

            document.body.addEventListener('click', e => {
                const wishlistBtn = e.target.closest('.wishlist-btn');
                if (wishlistBtn) {
                    const productId = wishlistBtn.dataset.productId;
                    const product = Store.getProductById(productId);
                    if (product) {
                        Wishlist.toggle(product);
                        wishlistBtn.classList.toggle('text-electric-pink', Wishlist.items.some(p => p.id === productId));
                    }
                }

                const addToCartBtn = e.target.closest('.add-to-cart-btn');
                if (addToCartBtn) {
                    const productId = addToCartBtn.dataset.productId;
                    const product = Store.getProductById(productId);
                    if (product) {
                        if(window.Cart) Cart.add(product);
                        if(window.Animations) {
                            const card = addToCartBtn.closest('.product-card');
                            if(card) Animations.flyToCart(card.querySelector('.product-image'));
                        }
                    }
                }
            });
        });
    </script>

</body>
</html>